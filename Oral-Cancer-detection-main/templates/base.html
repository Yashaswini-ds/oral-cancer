<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Oral Cancer Detection AI</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v={{ range(1, 10000) | random }}">
</head>

<body>
  <nav>
    <a href="{{ url_for('index') }}" class="nav-brand">O-SCAN</a>
    <div class="nav-links d-flex align-items-center gap-3">
      {% if current_user.is_authenticated %}

      <!-- Greeting -->
      <div class="d-none d-md-block text-white me-2">
        <small class="opacity-75">Welcome,</small>
        <span class="fw-semibold">
          {% if current_user.role == 'doctor' %}Dr. {% endif %}{{ current_user.username }}
        </span>
      </div>

      {% if current_user.role == 'doctor' %}
      <a href="{{ url_for('doctor_dashboard') }}" class="nav-link text-white">Dashboard</a>
      {% else %}
      <a href="{{ url_for('patient_dashboard') }}" class="nav-link text-white">Dashboard</a>
      <a href="{{ url_for('start_screening') }}" class="btn btn-sm btn-light text-primary fw-bold rounded-pill px-3">New
        Screening</a>
      {% endif %}

      <!-- Profile Dropdown -->
      <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
          id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <div class="bg-white bg-opacity-25 rounded-circle d-flex align-items-center justify-content-center"
            style="width: 35px; height: 35px;">
            <i class="fas fa-user"></i>
          </div>
        </a>
        <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 rounded-3 p-2" aria-labelledby="profileDropdown">
          <li><span class="dropdown-item-text text-muted small">Signed in as <strong>{{ current_user.username
                }}</strong></span></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item rounded-2" href="#"><i class="fas fa-id-card me-2 text-primary"></i> Profile</a>
          </li>
          <li><a class="dropdown-item rounded-2 text-danger" href="{{ url_for('logout') }}"><i
                class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
        </ul>
      </div>

      {% else %}
      <a href="{{ url_for('auth') }}" class="nav-link text-white">Login</a>
      <a href="{{ url_for('register_doctor') }}" class="btn btn-outline-light rounded-pill px-4">For Doctors</a>
      {% endif %}
    </div>
  </nav>

  <div class="flash-messages">
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    {% for category, message in messages %}
    <div class="alert alert-{{ category }}">
      {{ message }}
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}
  </div>

  {% block container_wrapper %}
  <div class="content-container container mt-4">
    {% block content %}{% endblock %}
  </div>
  {% endblock %}

  <footer>
    <div class="footer-content">
      <div class="footer-column">
        <h3>O-SCAN AI</h3>
        <p>Advanced AI-powered oral cancer screening accessible to everyone.</p>
      </div>
      <div class="footer-column">
        <h3>Quick Links</h3>
        <ul>
          <li><a href="{{ url_for('index') }}">Home</a></li>
          <li><a href="{{ url_for('auth') }}">Login</a></li>
          <li><a href="{{ url_for('register_doctor') }}">For Doctors</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>Contact</h3>
        <ul>
          <li>Email: support@aurascan.ai</li>
          <li>Emergency: 911</li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      &copy; 2026 O-SCAN AI. All rights reserved.
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Auto-dismiss alerts after 3 seconds
    setTimeout(() => {
      const alerts = document.querySelectorAll('.alert');
      alerts.forEach(alert => {
        alert.style.opacity = '0';
        setTimeout(() => alert.remove(), 500);
      });
    }, 3000);
  </script>
</body>

</html>